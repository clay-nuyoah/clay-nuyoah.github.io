<!DOCTYPE html>


<html lang="zh-CN">


<head>
  <meta charset="utf-8" />
  <meta name="google-site-verification" content="5fFagiALkrBFm256jMyr0Wf9ZkND0mtyCDozn1qlVxE" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     CLAY
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'G-XKPTQSV9FV', 'auto');
ga('send', 'pageview');

</script>



  

<link rel="alternate" href="/atom.xml" title="CLAY" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/clay-nuyoah"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">CLAY</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
        <img
          src="/images/ayer.svg"
          class="cover-logo"
          alt="CLAY"
        />
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-HLP-Speech-Recognition-1"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/08/21/HLP-Speech-Recognition-1/"
    >HLP-Speech-Recognition-1</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/08/21/HLP-Speech-Recognition-1/" class="article-date">
  <time datetime="2021-08-21T02:40:34.000Z" itemprop="datePublished">2021-08-21</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="语音识别是困难的"><a href="#语音识别是困难的" class="headerlink" title="语音识别是困难的"></a>语音识别是困难的</h1><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-41-36-c3885d1e4c9aedb8331939f455c35412-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821104128-dfd4a8.png"></p>
<p>有人曾经说过语音识别就像把水变成汽油，从海里提取黄金，治疗癌症，或者是去月球。来形容语音识别是非常困难的。</p>
<h1 id="语音识别"><a href="#语音识别" class="headerlink" title="语音识别"></a>语音识别</h1><h2 id="语音识别的表示"><a href="#语音识别的表示" class="headerlink" title="语音识别的表示"></a>语音识别的表示</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-44-59-77dff20df8c6495498a36c83fc23ba80-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821104438-40d19c.png"></p>
<pre><code>语音识别的语音部分可以通过数量为 T 维度为 d 的向量来表示
语音识别的文本部分可以通过数量为 N 维度为 V 的向量来表示，其中 V 为token 的个数，通常 T &gt; N 的</code></pre>
<h2 id="token"><a href="#token" class="headerlink" title="token"></a>token</h2><p>token 有非常多的种类，包括 Phoneme、Grapheme、Word、Morpheme、Bytes。</p>
<h3 id="Phoneme"><a href="#Phoneme" class="headerlink" title="Phoneme"></a>Phoneme</h3><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-50-03-655a14fbad966490aaaea47b8175ff2c-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821104959-75bd17.png"></p>
<p>Phoneme 作为一个发音单元，每个单词都对应着一个Phoneme，需要构建 Phoneme 表。在构建 Phoneme 表时，需要声学专家的帮助，但是每个声学专家对于每个词的 Phoneme 标注也可能是不一样的。</p>
<h3 id="Grapheme"><a href="#Grapheme" class="headerlink" title="Grapheme"></a>Grapheme</h3><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-53-42-a34ab8ea7779833449f88a78205b4da9-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821105336-128c68.png"></p>
<p>Grapheme 作为写作系统的最小单元，在英文中是 26 个英文字母 + 空白符 + 标点符号，在中文中就是每一个字，常见的字大约有 4000 多个。</p>
<h3 id="Word"><a href="#Word" class="headerlink" title="Word"></a>Word</h3><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-56-31-49c2524f975ab1bba3921fb2b3b14d12-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821105620-b70bb0.png"></p>
<p>word 在英文中就是单词，常见的单词大约有 100K 个，在中文中 word 代表一个词，在中文中词的数量就无法数清了。</p>
<h3 id="Morpheme"><a href="#Morpheme" class="headerlink" title="Morpheme"></a>Morpheme</h3><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-59-43-e68edc5b93ab3c9695e4d9e887aac5e1-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821105935-6707b8.png"></p>
<p>Morpheme 是一种介于 word 和 grapheme 中的一种 token，这种 token 有点类似于英文中的词根、词缀，但是 Morpheme 并不是词根、词缀，Morpheme 来自语言学和统计学。</p>
<h3 id="Bytes"><a href="#Bytes" class="headerlink" title="Bytes"></a>Bytes</h3><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/11-04-06-d92213e36f76d44f60dada8c45aaf017-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821110400-b51b6d.png"></p>
<p>世界上的任何一种语言都可以使用 UTF-8 进行编码，UTF-8 编码又可以使用 2 进制进行表示，所以如果能使用 Byte 这种 token，那么就能实现语言的独立性了。这种 token 在 19 年的一篇论文中已经进行了实现。</p>
<h3 id="token-总结"><a href="#token-总结" class="headerlink" title="token 总结"></a>token 总结</h3><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/11-06-50-b9816cea98deb5e47de4f99e2357cfa3-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821110637-123b07.png"></p>
<p>李宏毅老师让学生阅读了 100 篇最新的论文，并统计了使用每种 token 的比例。其中 Grapheme 是最受欢迎的。</p>
<h1 id="语音识别的应用"><a href="#语音识别的应用" class="headerlink" title="语音识别的应用"></a>语音识别的应用</h1><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/11-09-47-6d571163b9523a917b616162fa269cd2-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821110941-6fb079.png"></p>
<p>语音识别有很多的应用，如词嵌入，使用一串向量来表示语音信息；翻译，说出一段英文，自动翻译成中文；意图识别，识别语音中的意图；槽位填充，如识别语音中的位置和时间信息。</p>
<h1 id="声学特征"><a href="#声学特征" class="headerlink" title="声学特征"></a>声学特征</h1><h2 id="声学特征提取"><a href="#声学特征提取" class="headerlink" title="声学特征提取"></a>声学特征提取</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/11-13-28-2432986bb3812bc4860b686af8df7460-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821111321-74415f.png"></p>
<p>一般是每 25ms 对音频采样一次，但是会向右移动 10ms 位置（这就意味着会有 15ms 的音频信息会被重复采样），然后利用 400 sample points (16KHz)、39-dim MFCC 或者是 80-dim filter bank output 3 种方法提取声学特征。这样每 25ms 提取到的声学特征组成一个向量，这样的一个向量称为一个 frame。</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/14-05-09-fc82b12dc3aef08c14434f2a5d728fad-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821140501-0e3ea8.png"></p>
<p>特征提取的过程如上图所示，将音频信息通过 DFT 得到 spectrogram（人眼可以通过 spectrogram 识别出语音的内容，但是音频信息无法进行识别），经过多个 filter bank ，取 log ，得到 filter bank output 特征（上面 3 种特征中的一种），然后经过 DCT 得到 MFCC 特征。</p>
<h2 id="声学特征总结"><a href="#声学特征总结" class="headerlink" title="声学特征总结"></a>声学特征总结</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/14-11-52-2f80f41a25a11772d46073c53c039351-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821141146-5fe644.png"></p>
<p>李宏毅老师让学生阅读了 100 篇最新的文献，并统计了文献中这种声学特征所占的比例，其中 filter bank output 特征使用的最多。</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/14-16-40-37305d3b16d8e628a9ca2508e0dd0d06-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821141624-816bf7.png"></p>
<p>如果把经常用到的 MNIST 和 CIFAR-10 数据集的数据量换算成音频的话，那么他们的数据量分别可以用 49min 和 2hr40min 表示，而在真正的音频数据中，最小的数据为 4hr。</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/14-20-15-0fa764bff06fc452ebc5c9f003111aac-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821142006-95f302.png"></p>
<p>语音识别存在两种观点，一种是使用 seq2seq 进行语音识别，另一种时使用 HMM（隐马尔科夫模型） 进行语音识别。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-HLP-Introduction"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/08/21/HLP-Introduction/"
    >HLP-Introduction</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/08/21/HLP-Introduction/" class="article-date">
  <time datetime="2021-08-21T00:47:25.000Z" itemprop="datePublished">2021-08-21</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="课程的内容"><a href="#课程的内容" class="headerlink" title="课程的内容"></a>课程的内容</h1><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/08-48-18-9047d137b36dc73c1880aeee17de5dba-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821084802-f1a862.png"></p>
<p>1、让机器能听懂人说的话<br>2、让机器能看懂人写的句子<br>3、让机器能说出人听得懂的话<br>4、让机器能写出人看得懂的句子</p>
<h1 id="课程内容设置"><a href="#课程内容设置" class="headerlink" title="课程内容设置"></a>课程内容设置</h1><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/08-51-24-43690fd837e6aac3de96c0471a233327-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821085119-5f9c6e.png"></p>
<p>本门课程的名字叫做人类语言处理（HLP），与经常听到的自然语言处理（NLP）的区别在于 HLP 中文本和语音所占的比例是一样的，在 NLP 中，文本和语音所占的比例为 9：1</p>
<h1 id="复杂的人类语言"><a href="#复杂的人类语言" class="headerlink" title="复杂的人类语言"></a>复杂的人类语言</h1><h2 id="复杂的语音"><a href="#复杂的语音" class="headerlink" title="复杂的语音"></a>复杂的语音</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/08-54-51-4f9c58226058191ad4e7bf2d3340c023-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821085440-d1c614.png"></p>
<p>人类的语言是复杂的，每秒可以产生 16K 个样本点，每个样本点可以有 256 个可能的取值。</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/08-56-55-8ff9f187ddfa28a9964051ef01ed1100-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821085638-61a005.png"></p>
<p><strong>没有人可以说同一段话两次</strong></p>
<p>当一个人重复同一段话时，虽然听起来是一样的，但是从音频信号方面来看，每次说的话是不同的。</p>
<h2 id="复杂的文本"><a href="#复杂的文本" class="headerlink" title="复杂的文本"></a>复杂的文本</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/09-00-02-070ccd15cd5f7327794416ae8615c9fc-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821085955-2a87b8.png"></p>
<p>在早期对于文本数据的统计中，一个句子最多有 1289 个单词，但是在 2014 年的统计工作中，一个句子最多有 13955 个单词，但是要想打破这个纪录是非常容易的，只需要在最长的句子前面加点修饰就可以轻松的打破这个纪录。</p>
<h1 id="课程结构"><a href="#课程结构" class="headerlink" title="课程结构"></a>课程结构</h1><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/09-03-30-9157b74bb4bdcafb47ac49deeb85f7b0-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821090324-c7d60c.png"></p>
<p>本门课程可以使用这一张图片表示，由 6 部分组成</p>
<pre><code>1、语音-文本
2、语音-语音
3、语音-类别
4、文本-语音
5、文本-文本
6、文本-类别</code></pre>
<h1 id="使用的模型"><a href="#使用的模型" class="headerlink" title="使用的模型"></a>使用的模型</h1><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/09-05-52-b4d2571e201c37f8fdee618acc0c3162-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821090525-2010f0.png"></p>
<p>课程中的所有模型都是使用深度神经网络，遇到问题就使用深度学习硬 train 一发，没有硬 train 一发无法解决的问题，如果有，那只有你的训练资料和 GPU 不够多而已。</p>
<h1 id="课程详细介绍"><a href="#课程详细介绍" class="headerlink" title="课程详细介绍"></a>课程详细介绍</h1><h2 id="语音-文本"><a href="#语音-文本" class="headerlink" title="语音-文本"></a>语音-文本</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/09-20-02-d6df752d52a23773c1058b68786f507b-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821091952-ea13d2.png"></p>
<p><strong>语音-文本</strong> 应用的领域是自动语音识别，传统的自动语音识别需要用到声学模型、语言模型，需要声学知识。传统的自动语音识别系统占用的内存较大，不适合在手机端应用。基于深度学习的自动语音识别系统不需要额外的声学知识，而且所需的内存较小，适合在手机端进行应用。</p>
<h2 id="语音-语音"><a href="#语音-语音" class="headerlink" title="语音-语音"></a>语音-语音</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/09-37-06-bd780c23eef889cf7b13079af2c58b05-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821093659-b5d032.png"></p>
<p><strong>语音-语音</strong> 的应用是语音分离，两个人同时说话可以将语者一和语者二进行辨认。</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/09-38-59-1c7d4ab45377024e4cef0d9b2407e14f-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821093853-73c759.png"></p>
<p><strong>语音-语音</strong> 的另外一个应用是语音转换，可以将语者一的声音转换成语者二的声音。就像动漫 《名侦探柯南》中，柯南在侦探案件中，使用到的技术。</p>
<h2 id="语音-类别"><a href="#语音-类别" class="headerlink" title="语音-类别"></a>语音-类别</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/09-41-51-9a02f9c5426f30ec7dc82e87731fa92c-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821094145-7ac1e3.png"></p>
<p><strong>语音-类别</strong> 的应用是语者识别，给模型一段语音，模型能辨认出这是哪个语者说的话。</p>
<p><strong>语音-类别</strong> 的另外一个应用是关键词识别，像现在使用的苹果手机，可以使用 “Hey Siri”来唤醒，还有小米手机，可以使用“小爱同学”来唤醒。</p>
<h2 id="文本-语音"><a href="#文本-语音" class="headerlink" title="文本-语音"></a>文本-语音</h2><p><strong>文本-语音</strong> 的应用有语音合成。</p>
<h2 id="文本-文本"><a href="#文本-文本" class="headerlink" title="文本-文本"></a>文本-文本</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-16-49-a14e1c3c65a44890077275fe3650090b-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821101643-d4409a.png"></p>
<p><strong>文本-文本</strong> 有非常多的应用，如翻译、概述（给定一篇文章，简要概述文章的内容）、聊天机器人、问答系统。</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/08/21/10-18-45-4e57cee28f187aa52b0838ef7b835fda-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210821101836-311ba6.png"></p>
<p>还有其他的应用看起来无法使用这种结构来实现，例如语法解析，语法解析会生成一棵语法解析树，这在<strong>文本-文本</strong>模式中是非常难实现的，但是通过将语法解析树进行变形，就能非常容易地实现了。</p>
<h2 id="文本-类别"><a href="#文本-类别" class="headerlink" title="文本-类别"></a>文本-类别</h2><p>文本-类别的应用有情感分析，给定一段文本，分析文本的情感是积极的还是消极的。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-end-to-end-asr-pro"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/07/28/end-to-end-asr-pro/"
    >end-to-end-asr-pro</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/07/28/end-to-end-asr-pro/" class="article-date">
  <time datetime="2021-07-28T00:54:07.000Z" itemprop="datePublished">2021-07-28</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><h2 id="asr-py"><a href="#asr-py" class="headerlink" title="asr.py"></a>asr.py</h2><p>asr.py 文件的类结构如下，该文件下存在着 4 个类，每个类都继承了 nn.Module 模块</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/30/10-01-14-7742ca05938e61856798702bf3f189af-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210730100103-b01ecd.png"></p>
<h3 id="ASR"><a href="#ASR" class="headerlink" title="ASR"></a>ASR</h3><p>ASR 类为语音识别模型，里面定义了编码器、注意力机制、和解码器，以及定义了模型之间的前向传播过程。</p>
<h3 id="Decoder"><a href="#Decoder" class="headerlink" title="Decoder"></a>Decoder</h3><p>Decoder 类是解码器的实现，解码器使用的是 LSTM，他的输入为 Attention 的输出和 LSTM 上一时刻的输出。</p>
<h3 id="Attention"><a href="#Attention" class="headerlink" title="Attention"></a>Attention</h3><p>Attention 是注意力机制的实现，里面对注意力的机制的前半部分过程进行操作，例如获取 key 的值。注意力机制在项目中又分了 ScaleDotAttention 和 LocationAwareAttention</p>
<h3 id="Encoder"><a href="#Encoder" class="headerlink" title="Encoder"></a>Encoder</h3><p>Encoder 类为编码器，主要是将声学特征转化为输出。编码器的实现有 4 种方式，具体结构如下</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/30/10-30-46-cbb22aabe227d152ec84c8c83089b7ed-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210730103039-42af33.png"></p>
<p>最下面的两层两两组合可以产生 4 种结构，一旦第二层的结构确定了，那么 3、4、5、6层的结构也会确定，他的结构和第二层的结构是一样的，比如第二层选择 LSTM，那么 3、4、5、6层也是 LSTM。</p>
<h2 id="module-py"><a href="#module-py" class="headerlink" title="module.py"></a>module.py</h2><p>module.py 文件的类结构如下，该文件下存在着 4 个类，前 4 个类继承了 nn.Module 模块，后两个类继承了 BaseAttention 模块。</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/30/10-14-49-ad2f1bbded8eb3f8cdb3e09b1713ab32-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210730101443-67f29c.png"></p>
<h3 id="VGGExtractor"><a href="#VGGExtractor" class="headerlink" title="VGGExtractor"></a>VGGExtractor</h3><p>VGGExtractor 类作为编码器的底层结构使用了多层 CNN + MaxPool 技术来实现。</p>
<h3 id="CNNExtractor"><a href="#CNNExtractor" class="headerlink" title="CNNExtractor"></a>CNNExtractor</h3><p>CNNExtractor 和 VGGExtractor 一样也是作为编码器的底层结构，但是 CNNExtractor 使用了 2 层的一维卷积。</p>
<h3 id="BaseAttention"><a href="#BaseAttention" class="headerlink" title="BaseAttention"></a>BaseAttention</h3><p>和上面的提到的 Attention 类做的操作正好相反，BaseAttention 做的是 Attention 类的后置操作，比如求 softmax 概率，求 Attention 的输出值。</p>
<h3 id="ScaleDotAttention"><a href="#ScaleDotAttention" class="headerlink" title="ScaleDotAttention"></a>ScaleDotAttention</h3><p>没看</p>
<h3 id="LocationAwareAttention"><a href="#LocationAwareAttention" class="headerlink" title="LocationAwareAttention"></a>LocationAwareAttention</h3><p>把当前输入之前的局部信息输入到 Attention 中</p>
<h2 id="audio-py"><a href="#audio-py" class="headerlink" title="audio.py"></a>audio.py</h2><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/30/10-51-42-0d05338ca8117de715edbaf126fa7d7e-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210730105134-937453.png"></p>
<h3 id="CMVN-和-Delta"><a href="#CMVN-和-Delta" class="headerlink" title="CMVN 和 Delta"></a>CMVN 和 Delta</h3><p>是对提取到的声学特征做特征变换</p>
<h3 id="Postprocess"><a href="#Postprocess" class="headerlink" title="Postprocess"></a>Postprocess</h3><p>对声学特征的后置处理，主要做的是维度的变换</p>
<h3 id="ExtractAudioFeature"><a href="#ExtractAudioFeature" class="headerlink" title="ExtractAudioFeature"></a>ExtractAudioFeature</h3><p>使用 kaldi 对音频信息进行特征的提取</p>
<h1 id="1、音频特征提取"><a href="#1、音频特征提取" class="headerlink" title="1、音频特征提取"></a>1、音频特征提取</h1><p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/28/08-55-44-3dcfe5d323833d618e9992faa3ef4271-QQ%E6%88%AA%E5%9B%BE20210728085513-abb2aa.png"></p>
<p>各部分做的工作</p>
<pre><code>ExtractAudioFeature 通过 torchaudio.compliance.kaldi 提取特征

Delta + CMVM 做特征变换

Postprocess维度变换</code></pre>
<p>音频特征提取的步骤是使用 kaldi 对声学特征进行提取，然后使用 Delta + CMVM 做特征变换，最后进行维度的变换。</p>
<p>**CMVN **</p>
<p>对特征进行归一化，均值M做减法的归一化，方差V做归一化</p>
<p><strong>差分模型（deltas)</strong> </p>
<p>是识别中经常使用的方法，即将不同帧的特征之间（比如当前帧特征减去前一帧特征，以及更高阶的差分）差值也作为特征. </p>
<p>kaldi存储的特征文件保留原始特征，而不包含CMVN变换和差分的特征，在每次需要（训练，识别或者对其）时再提取这些特征。</p>
<p><strong>cmvn：倒谱均值方差归一化</strong></p>
<p>提取声学特征以后，将声学特征从一个空间转变成另一个空间，使得在这个空间下特征参数更符合某种概率分布，压缩了特征参数值域的动态范围，减少了训练和测试环境的不匹配等</p>
<p>提升模型的鲁棒性，其实就是归一化的操作。</p>
<p><strong>梅尔倒谱系数（mfcc）</strong></p>
<p>提取过程：连续语音–预加重–加窗分帧–FFT–MEL滤波器组–对数运算–DCT<br>为什么要这么做呢？<br>首先，语音做FFT之后就把语音转换到频域，每一帧代表语音能量，越亮代表能量越大；</p>
<p>然后经过MEL滤波器组，是把语音变换到MEL域，MEL刻度是仿照人耳进行设计的，更符合人耳的听觉特性；</p>
<p>再然后做对数运算，做DCT，最后的这步DCT相当于又做了一遍FFT，目的是提取每一帧的包络，因为语音的信息主要在包络上；最后提取的mfcc。</p>
<h1 id="2、编码器"><a href="#2、编码器" class="headerlink" title="2、编码器"></a>2、编码器</h1><p>编码器使用 CNN + RNN 的实现方式</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/28/08-56-35-7ad90ce63b1cb7b3e9cd12129d3658d0-QQ%E6%88%AA%E5%9B%BE20210728085627-f3351d.png"></p>
<p>最下层的 VGGExtractor 是卷积层，主要内容如下</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/28/08-58-23-f0831c652ed06b1ffa662676c5e739f2-QQ%E6%88%AA%E5%9B%BE20210728085817-744582.png"></p>
<h1 id="3、Attention"><a href="#3、Attention" class="headerlink" title="3、Attention"></a>3、Attention</h1><p>Attention 使用的是 LocationAwareAttention，</p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/04/19-25-50-d81cd3601807befb77e0bb7897e4b72f-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210704192544-d4114e.png"></p>
<p>在项目中的具体细节为 </p>
<p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/28/20-42-10-04ae1b655930ab3364c8aa805b319a9f-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210728204202-ca6bb5.png"></p>
<h1 id="4、解码器"><a href="#4、解码器" class="headerlink" title="4、解码器"></a>4、解码器</h1> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Transformer"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/07/11/Transformer/"
    >Transformer</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/07/11/Transformer/" class="article-date">
  <time datetime="2021-07-11T11:35:56.000Z" itemprop="datePublished">2021-07-11</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/12/10-29-28-c9a0a3715bc67b36854c12ff8ab42c7c-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210712102914-14187c.png"></p> 
      <a class="article-more-link" href="/2021/07/11/Transformer/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Attention/" rel="tag">Attention</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Self-Attention/" rel="tag">Self-Attention</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Transformer/" rel="tag">Transformer</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-self-attention"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/07/10/self-attention/"
    >self attention</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/07/10/self-attention/" class="article-date">
  <time datetime="2021-07-10T11:15:26.000Z" itemprop="datePublished">2021-07-10</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/11/10-42-53-a108b67dae803d8778d8ac314a49c12b-QQ%E6%88%AA%E5%9B%BE20210711104245-c097df.png"></p> 
      <a class="article-more-link" href="/2021/07/10/self-attention/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Attention/" rel="tag">Attention</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Self-Attention/" rel="tag">Self Attention</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-cnn"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/07/09/cnn/"
    >CNN</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/07/09/cnn/" class="article-date">
  <time datetime="2021-07-09T06:05:59.000Z" itemprop="datePublished">2021-07-09</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/09/19-13-18-10b27b1a14748b41dc2d7eb390a95b7d-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210709191301-85fce7.png"></p> 
      <a class="article-more-link" href="/2021/07/09/cnn/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CNN/" rel="tag">CNN</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/" rel="tag">卷积神经网络</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-end-to-end-speech-recognition"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/06/30/end-to-end-speech-recognition/"
    >end-to-end speech recognition</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/06/30/end-to-end-speech-recognition/" class="article-date">
  <time datetime="2021-06-30T06:59:18.000Z" itemprop="datePublished">2021-06-30</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/07/06/09-17-37-7aadc7cdf5911ab44e6edd0703223145-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210706091731-ba3f68.png"></p> 
      <a class="article-more-link" href="/2021/06/30/end-to-end-speech-recognition/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Speech-Recognition/" rel="tag">Speech Recognition</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/end-to-end/" rel="tag">end-to-end</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AB%AF%E5%88%B0%E7%AB%AF/" rel="tag">端到端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AF%AD%E9%9F%B3%E8%AF%86%E5%88%AB/" rel="tag">语音识别</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-GRU-AND-NMT-Advance"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/06/29/GRU-AND-NMT-Advance/"
    >GRU AND NMT Advance</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/06/29/GRU-AND-NMT-Advance/" class="article-date">
  <time datetime="2021-06-29T12:34:06.000Z" itemprop="datePublished">2021-06-29</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/06/30/14-38-52-bd315ad1a71aff2eae980dd68acb6a81-QQ%E6%88%AA%E5%9B%BE20210630143830-6233fc.png"></p> 
      <a class="article-more-link" href="/2021/06/29/GRU-AND-NMT-Advance/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GRU/" rel="tag">GRU</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LSTM/" rel="tag">LSTM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MT%E8%AF%84%E6%B5%8B/" rel="tag">MT评测</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NMT/" rel="tag">NMT</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-NMT-And-Attention"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/06/28/NMT-And-Attention/"
    >NMT And Attention</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/06/28/NMT-And-Attention/" class="article-date">
  <time datetime="2021-06-28T08:37:11.000Z" itemprop="datePublished">2021-06-28</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/06/28/17-22-59-213aec43c17a297eeb2e153f45e99dc0-QQ%E6%88%AA%E5%9B%BE20210628172251-6e8dab.png"></p> 
      <a class="article-more-link" href="/2021/06/28/NMT-And-Attention/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Attention/" rel="tag">Attention</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MT/" rel="tag">MT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NMT/" rel="tag">NMT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E7%BF%BB%E8%AF%91/" rel="tag">机器翻译</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B3%A8%E6%84%8F%E5%8A%9B%E6%9C%BA%E5%88%B6/" rel="tag">注意力机制</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-LSTMs-and-GRUs"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/06/23/LSTMs-and-GRUs/"
    >LSTMs and GRUs</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2021/06/23/LSTMs-and-GRUs/" class="article-date">
  <time datetime="2021-06-23T00:55:38.000Z" itemprop="datePublished">2021-06-23</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p><img src="https://cdn.jsdelivr.net/gh/clay-nuyoah/ImageHosting@master/img/clay-nuyoah/Users/93497/Desktop/2021/06/25/15-07-44-5473f62de3badd7522c101358cf53525-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20210625150625-4b0b5c.png"></p> 
      <a class="article-more-link" href="/2021/06/23/LSTMs-and-GRUs/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GRU/" rel="tag">GRU</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LSTM/" rel="tag">LSTM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NLP/" rel="tag">NLP</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2021
        <i class="ri-heart-fill heart_icon"></i> MGL
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        由 <a href="https://hexo.io" target="_blank">Hexo</a> 强力驱动
        <span class="division">|</span>
        主题 - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>访问人数:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>浏览次数:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
      <li>
          <img src="/images/beian.png"></img>
          <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=01234567890123" target="_black" rel="nofollow">浙公网安备01234567890123号</a>
      </li>
        
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src=''></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="CLAY"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" target="_blank" rel="noopener" href="http://shenyu-vip.lofter.com">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2019/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true
  }
</script>

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>